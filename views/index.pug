extends layout

block content
  h1= title
  p Welcome to #{title}

  //- list of todos
  ul
    each val in todos
      li
        //- edit form
        form(method='POST', action='/edit', style='display:inline')
          input(type='hidden', name='id', value=val.id)
          input(type='text', name='task', value=val.task, required)
          button(type='submit') Save

        //- complete form
        if !val.completed
          form(method='POST', action='/complete', style='display:inline')
            input(type='hidden', name='id', value=val.id)
            button(type='submit') Mark Completed
        else
          span(style='color: green; font-weight: bold; margin-left: 10px') Completed

        //- delete form
        form(method='POST', action='/delete', style='display:inline')
          input(type='hidden', name='id', value=val.id)
          button(type='submit') Delete

  hr

  //- sdd new task
  h2 Add a new task
  form(method='POST', action='/create', onsubmit='return validateTask()')
    label(for='task') Task:
    input(type='text', name='task', id='task', required)
    button(type='submit') Create Task

  //- js validation
  script.
    function validateTask() {
      const taskInput = document.getElementById('task').value.trim();
      if (!taskInput) {
        alert("Task cannot be blank");
        return false;
      }
      return true;
    }
